<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="CrackScreen">
<title>CrackScreen â€“ Broken Screen Prank</title>
<style>

/* â”€â”€ RESET â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: #000;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: none;
}

/* â”€â”€ ALL SCREENS â”€â”€ */
.screen {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.hidden { display: none !important; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAUNCH SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-launch {
  background: radial-gradient(ellipse at 50% 0%, #1a0a2e 0%, #000 70%);
  gap: 0;
  z-index: 10;
}
.launch-glow {
  width: 180px; height: 180px;
  background: radial-gradient(circle, rgba(255,59,48,0.25) 0%, transparent 70%);
  position: absolute;
  top: 15%;
  border-radius: 50%;
  animation: glow-pulse 2.5s ease-in-out infinite;
}
@keyframes glow-pulse {
  0%,100% { transform: scale(1); opacity: 0.6; }
  50%      { transform: scale(1.3); opacity: 1; }
}
.launch-emoji {
  font-size: 72px;
  margin-bottom: 20px;
  animation: float 3s ease-in-out infinite;
  position: relative;
  z-index: 1;
}
@keyframes float {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-8px); }
}
.launch-title {
  color: #fff;
  font-size: clamp(28px, 8vw, 36px);
  font-weight: 800;
  letter-spacing: -1px;
  position: relative; z-index: 1;
}
.launch-sub {
  color: rgba(255,255,255,0.45);
  font-size: 14px;
  text-align: center;
  max-width: 240px;
  line-height: 1.5;
  margin: 10px 0 36px;
  position: relative; z-index: 1;
}
.btn-main {
  background: linear-gradient(135deg, #ff3b30, #ff6b35);
  color: #fff;
  border: none;
  border-radius: 60px;
  padding: 17px 56px;
  font-size: 18px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 8px 30px rgba(255,59,48,0.5);
  position: relative; z-index: 1;
  letter-spacing: 0.3px;
  transition: transform 0.1s;
}
.btn-main:active { transform: scale(0.96); }
.btn-settings {
  margin-top: 14px;
  background: rgba(255,255,255,0.08);
  color: rgba(255,255,255,0.6);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 60px;
  padding: 12px 32px;
  font-size: 14px;
  cursor: pointer;
  position: relative; z-index: 1;
}
.launch-footer {
  color: rgba(255,255,255,0.15);
  font-size: 11px;
  margin-top: 28px;
  position: relative; z-index: 1;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COUNTDOWN SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-countdown {
  background: #000;
  gap: 12px;
  z-index: 20;
}
.cd-label {
  color: rgba(255,255,255,0.5);
  font-size: 13px;
  letter-spacing: 2px;
  text-transform: uppercase;
}
#cd-num {
  color: #fff;
  font-size: clamp(120px, 40vw, 200px);
  font-weight: 900;
  line-height: 1;
}
#cd-num.pop {
  animation: pop 0.35s cubic-bezier(0.34,1.56,0.64,1);
}
@keyframes pop {
  0%   { transform: scale(1.5); opacity: 0; }
  100% { transform: scale(1);   opacity: 1; }
}
.cd-hint {
  color: rgba(255,255,255,0.3);
  font-size: 13px;
  text-align: center;
  max-width: 220px;
  line-height: 1.5;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FAKE HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-home {
  background: linear-gradient(170deg, #1b2a4a 0%, #0f1e35 50%, #060d1a 100%);
  justify-content: flex-start;
  z-index: 15;
  padding-top: 60px;
}
.home-status {
  width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 0 24px;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 20px;
}
.home-time {
  color: #fff;
  font-size: clamp(60px, 18vw, 80px);
  font-weight: 200;
  text-align: center;
  letter-spacing: -2px;
}
.home-date {
  color: rgba(255,255,255,0.65);
  font-size: 15px;
  text-align: center;
  margin-top: 6px;
}
.home-icons {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;
  margin: 44px auto 0;
  padding: 0 20px;
  width: 100%;
  max-width: 340px;
}
.icon-wrap {
  display: flex; flex-direction: column; align-items: center; gap: 5px;
}
.icon-box {
  width: 58px; height: 58px;
  border-radius: 13px;
  display: flex; align-items: center; justify-content: center;
  font-size: 28px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.4);
}
.icon-name { color: rgba(255,255,255,0.8); font-size: 10px; }
.home-dock {
  position: absolute;
  bottom: 28px;
  display: flex;
  gap: 20px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 22px;
  padding: 14px 28px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CRACK SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-crack {
  background: #000;
  z-index: 5;
}
#c-crack, #c-particles {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
#c-crack     { z-index: 6; }
#c-particles { z-index: 7; }

.glass-sheen {
  position: absolute; inset: 0;
  background: linear-gradient(135deg,
    rgba(255,255,255,0.04) 0%,
    transparent 50%,
    rgba(255,255,255,0.03) 100%);
  pointer-events: none;
  z-index: 8;
}
.vignette {
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at center, transparent 35%, rgba(0,0,0,0.65) 100%);
  pointer-events: none;
  z-index: 9;
}
#tap-hint {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  color: rgba(255,255,255,0.4);
  font-size: 15px;
  pointer-events: none;
  z-index: 10;
  transition: opacity 0.6s;
  line-height: 1.7;
}
#tap-hint .big { font-size: 36px; display: block; margin-bottom: 4px; }
#press-harder {
  position: absolute;
  top: 38%; left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 24px;
  font-weight: 900;
  text-shadow: 0 0 30px rgba(255,59,48,0.9);
  pointer-events: none;
  z-index: 11;
  opacity: 0;
  transition: opacity 0.2s;
}
#press-harder.show { opacity: 1; }

/* Error toasts */
#error-zone {
  position: absolute;
  bottom: 110px; left: 0; right: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  pointer-events: none;
  z-index: 12;
}
.err-toast {
  background: rgba(18,18,18,0.93);
  border: 1px solid rgba(255,59,48,0.35);
  border-radius: 13px;
  padding: 11px 18px;
  text-align: center;
  max-width: 280px;
  animation: slide-up 0.4s cubic-bezier(0.34,1.56,0.64,1) both;
}
@keyframes slide-up {
  from { transform: translateY(30px); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}
.err-title { color: #ff3b30; font-size: 12px; font-weight: 700; letter-spacing: 0.4px; }
.err-body  { color: rgba(255,255,255,0.8); font-size: 13px; margin-top: 3px; }

/* Bottom bar */
#bottom-bar {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  z-index: 20;
}
#ad-banner {
  background: rgba(20,20,20,0.96);
  border-top: 1px solid rgba(255,255,255,0.06);
  text-align: center;
  color: rgba(255,255,255,0.25);
  font-size: 11px;
  padding: 6px;
  letter-spacing: 0.4px;
}
#action-bar {
  display: flex;
  justify-content: space-around;
  padding: 10px 0;
  background: rgba(8,8,8,0.92);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-top: 1px solid rgba(255,255,255,0.07);
}
.act-btn {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  background: none; border: none;
  color: rgba(255,255,255,0.65);
  font-size: 10px;
  cursor: pointer;
  padding: 4px 10px;
  border-radius: 8px;
  touch-action: manipulation;
}
.act-btn .icon { font-size: 21px; }
.act-btn:active { background: rgba(255,255,255,0.08); color: #fff; }

/* Shake animation */
@keyframes shake {
  0%,100%{ transform:translate(0,0); }
  15%    { transform:translate(-9px,4px); }
  30%    { transform:translate(9px,-3px); }
  45%    { transform:translate(-7px,5px); }
  60%    { transform:translate(7px,-4px); }
  75%    { transform:translate(-4px,2px); }
  90%    { transform:translate(4px,-2px); }
}
.do-shake { animation: shake 0.45s ease; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOOT SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-boot {
  background: #000;
  z-index: 50;
  gap: 20px;
}
.boot-logo {
  width: 64px; height: 64px;
  opacity: 0;
  animation: fade-in 0.6s ease 0.3s forwards;
}
@keyframes fade-in { to { opacity: 1; } }
.boot-brand {
  color: rgba(255,255,255,0.75);
  font-size: 13px;
  letter-spacing: 5px;
  text-transform: uppercase;
  opacity: 0;
  animation: fade-in 0.6s ease 0.7s forwards;
}
.boot-bar-wrap {
  width: 150px; height: 2px;
  background: rgba(255,255,255,0.1);
  border-radius: 2px;
  overflow: hidden;
  opacity: 0;
  animation: fade-in 0.4s ease 1s forwards;
}
#boot-bar {
  height: 100%;
  width: 0%;
  background: rgba(255,255,255,0.75);
  border-radius: 2px;
  transition: width 2.2s linear;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS DRAWER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-settings {
  background: rgba(0,0,0,0.75);
  justify-content: flex-end;
  z-index: 80;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.drawer {
  background: #1c1c1e;
  border-radius: 22px 22px 0 0;
  width: 100%;
  max-height: 85vh;
  overflow-y: auto;
  padding-bottom: 40px;
  -webkit-overflow-scrolling: touch;
}
.drawer-handle {
  width: 38px; height: 4px;
  background: rgba(255,255,255,0.18);
  border-radius: 2px;
  margin: 14px auto 18px;
}
.drawer h2 { color: #fff; font-size: 18px; font-weight: 700; padding: 0 20px 14px; border-bottom: 1px solid rgba(255,255,255,0.07); }
.section-label { color: rgba(255,255,255,0.4); font-size: 11px; letter-spacing: 0.8px; text-transform: uppercase; padding: 14px 20px 6px; }
.s-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 13px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.s-row-label { color: #fff; font-size: 15px; }
.s-row-sub   { color: rgba(255,255,255,0.4); font-size: 12px; margin-top: 2px; }
.tog { position: relative; width: 50px; height: 30px; flex-shrink: 0; cursor: pointer; }
.tog input { opacity: 0; width: 0; height: 0; position: absolute; }
.tog-track {
  position: absolute; inset: 0;
  background: rgba(255,255,255,0.15);
  border-radius: 30px;
  transition: background 0.2s;
}
.tog-track::after {
  content: '';
  position: absolute;
  left: 2px; top: 2px;
  width: 26px; height: 26px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s;
  box-shadow: 0 1px 5px rgba(0,0,0,0.3);
}
.tog input:checked ~ .tog-track { background: #34c759; }
.tog input:checked ~ .tog-track::after { transform: translateX(20px); }
.s-range {
  -webkit-appearance: none;
  width: 130px; height: 4px;
  background: rgba(255,255,255,0.18);
  border-radius: 2px;
  outline: none;
}
.s-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 22px; height: 22px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 1px 5px rgba(0,0,0,0.3);
}
.range-val { color: rgba(255,255,255,0.5); font-size: 13px; min-width: 20px; text-align: right; }
.pack-scroll {
  display: flex; gap: 12px;
  padding: 10px 20px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.pack-scroll::-webkit-scrollbar { display: none; }
.pack-card {
  flex-shrink: 0;
  width: 76px;
  background: rgba(255,255,255,0.06);
  border: 1.5px solid rgba(255,255,255,0.1);
  border-radius: 14px;
  padding: 10px 6px 8px;
  text-align: center;
  cursor: pointer;
  position: relative;
  transition: border-color 0.15s, background 0.15s;
}
.pack-card.sel { border-color: #0af; background: rgba(0,170,255,0.1); }
.pack-em   { font-size: 26px; display: block; }
.pack-nm   { color: rgba(255,255,255,0.75); font-size: 10px; margin-top: 4px; }
.pack-pr   { color: #ffd60a; font-size: 9px; font-weight: 700; margin-top: 2px; }
.pack-lock { position: absolute; top: 4px; right: 6px; font-size: 10px; }
.btn-noad {
  margin: 16px 20px 0;
  width: calc(100% - 40px);
  background: linear-gradient(135deg, #5e5ce6, #bf5af2);
  border: none; border-radius: 14px;
  padding: 15px;
  color: #fff; font-size: 15px; font-weight: 700;
  cursor: pointer;
}
.btn-close-drawer {
  margin: 12px 20px 0;
  width: calc(100% - 40px);
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 14px;
  padding: 14px;
  color: #fff; font-size: 15px;
  cursor: pointer;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INTERSTITIAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-inter {
  background: rgba(0,0,0,0.96);
  z-index: 90;
  gap: 16px;
}
#s-inter h2 { color: #fff; font-size: 20px; font-weight: 700; }
#s-inter p  { color: rgba(255,255,255,0.45); font-size: 14px; text-align: center; max-width: 260px; }
.ad-mock {
  width: 300px; height: 220px;
  background: rgba(255,255,255,0.04);
  border: 1px dashed rgba(255,255,255,0.12);
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  color: rgba(255,255,255,0.18);
  font-size: 13px;
}
.btn-skip {
  background: rgba(255,255,255,0.09);
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 50px;
  padding: 12px 36px;
  color: #fff; font-size: 14px;
  cursor: pointer;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARE MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s-share {
  background: rgba(0,0,0,0.82);
  z-index: 95;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.share-box {
  background: #1c1c1e;
  border-radius: 22px;
  padding: 22px;
  width: min(310px, 90vw);
  display: flex; flex-direction: column; align-items: center; gap: 14px;
}
.share-box h2 { color: #fff; font-size: 17px; font-weight: 700; }
#share-preview {
  width: 100%;
  aspect-ratio: 9/16;
  max-height: 260px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.1);
  background: #000;
}
#share-preview canvas { width: 100%; height: 100%; display: block; }
.share-btns { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
.sbtn {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 9px 16px;
  color: #fff; font-size: 13px;
  cursor: pointer;
}
.sbtn:active { background: rgba(255,255,255,0.15); }
.btn-close-share {
  background: none; border: none;
  color: rgba(255,255,255,0.4);
  font-size: 14px; cursor: pointer;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#toast {
  position: fixed;
  top: 56px; left: 50%;
  transform: translateX(-50%);
  background: rgba(25,25,25,0.95);
  color: #fff;
  padding: 11px 22px;
  border-radius: 50px;
  font-size: 14px; font-weight: 600;
  white-space: nowrap;
  z-index: 999;
  box-shadow: 0 6px 24px rgba(0,0,0,0.5);
  display: none;
  pointer-events: none;
}

</style>
</head>
<body>

<!-- â”€â”€ TOAST â”€â”€ -->
<div id="toast"></div>

<!-- LAUNCH -->
<div class="screen" id="s-launch">
  <div class="launch-glow"></div>
  <div class="launch-emoji">ğŸ’¥</div>
  <div class="launch-title">CrackScreen</div>
  <div class="launch-sub">Fool your friends with a shockingly realistic broken screen!</div>
  <button class="btn-main" id="btn-start">Start Prank ğŸ˜ˆ</button>
  <button class="btn-settings" id="btn-open-settings">âš™ï¸ Settings</button>
  <div class="launch-footer">For entertainment only. No real damage.</div>
</div>

<!-- COUNTDOWN -->
<div class="screen hidden" id="s-countdown">
  <div class="cd-label">Prank starting in</div>
  <div id="cd-num">3</div>
  <div class="cd-hint">Hand the phone to your friend ğŸ˜ˆ</div>
</div>

<!-- FAKE HOME -->
<div class="screen hidden" id="s-home">
  <div class="home-status">
    <span id="hs-time-small">9:41</span>
    <span>â—â—â—â— WiFi ğŸ”‹</span>
  </div>
  <div class="home-time" id="hs-time">9:41</div>
  <div class="home-date" id="hs-date">Monday, February 23</div>
  <div class="home-icons">
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#29abe2,#006ec0)">ğŸ“±</div><div class="icon-name">Phone</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#3eba46,#1a6e20)">ğŸ’¬</div><div class="icon-name">Messages</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#f7941d,#c55000)">ğŸ“·</div><div class="icon-name">Camera</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#5856d6,#3634a3)">ğŸµ</div><div class="icon-name">Music</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#ff2d55,#c0003c)">â¤ï¸</div><div class="icon-name">Health</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#ff9500,#c07000)">ğŸ—ºï¸</div><div class="icon-name">Maps</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#34aadc,#007aff)">ğŸŒ</div><div class="icon-name">Safari</div></div>
    <div class="icon-wrap"><div class="icon-box" style="background:linear-gradient(135deg,#ffcc02,#e09500)">ğŸ“§</div><div class="icon-name">Mail</div></div>
  </div>
  <div class="home-dock">
    <div class="icon-box" style="background:linear-gradient(135deg,#29abe2,#006ec0);width:52px;height:52px;font-size:24px">ğŸ“±</div>
    <div class="icon-box" style="background:linear-gradient(135deg,#3eba46,#1a6e20);width:52px;height:52px;font-size:24px">ğŸ’¬</div>
    <div class="icon-box" style="background:linear-gradient(135deg,#34aadc,#007aff);width:52px;height:52px;font-size:24px">ğŸŒ</div>
    <div class="icon-box" style="background:linear-gradient(135deg,#ff9500,#c07000);width:52px;height:52px;font-size:24px">ğŸµ</div>
  </div>
</div>

<!-- CRACK SCREEN -->
<div class="screen hidden" id="s-crack">
  <canvas id="c-crack"></canvas>
  <canvas id="c-particles"></canvas>
  <div class="glass-sheen"></div>
  <div class="vignette"></div>
  <div id="tap-hint"><span class="big">â˜ï¸</span>Tap to crack the screen!</div>
  <div id="press-harder">PRESS HARDER! ğŸ’¥</div>
  <div id="error-zone"></div>
  <div id="bottom-bar">
    <div id="action-bar">
      <button class="act-btn" id="ab-reset">  <span class="icon">ğŸ”„</span>Reset</button>
      <button class="act-btn" id="ab-restart"><span class="icon">ğŸ“±</span>Restart</button>
      <button class="act-btn" id="ab-share">  <span class="icon">ğŸ“¤</span>Share</button>
      <button class="act-btn" id="ab-settings"><span class="icon">âš™ï¸</span>Settings</button>
      <button class="act-btn" id="ab-home">   <span class="icon">ğŸ </span>Home</button>
    </div>
    <div id="ad-banner">ğŸ“¢ AD BANNER â€” Your ad here</div>
  </div>
</div>

<!-- BOOT -->
<div class="screen hidden" id="s-boot">
  <svg class="boot-logo" viewBox="0 0 64 64" fill="none">
    <path d="M32 4 C32 4,48 10,54 22 C60 34,56 50,46 56 C38 62,26 62,18 56 C8 50,4 34,10 22 C16 10,32 4,32 4Z" fill="rgba(255,255,255,0.88)"/>
  </svg>
  <div class="boot-brand">Loadingâ€¦</div>
  <div class="boot-bar-wrap"><div id="boot-bar"></div></div>
</div>

<!-- SETTINGS -->
<div class="screen hidden" id="s-settings">
  <div class="drawer">
    <div class="drawer-handle"></div>
    <h2>Settings âš™ï¸</h2>
    <div class="section-label">Crack Style</div>
    <div class="pack-scroll" id="pack-scroll"></div>
    <div class="section-label">Options</div>
    <div class="s-row">
      <div><div class="s-row-label">Sound Effects</div><div class="s-row-sub">Glass crack sounds</div></div>
      <label class="tog"><input type="checkbox" id="t-sound" checked><span class="tog-track"></span></label>
    </div>
    <div class="s-row">
      <div><div class="s-row-label">Vibration</div><div class="s-row-sub">Haptic feedback</div></div>
      <label class="tog"><input type="checkbox" id="t-vibrate" checked><span class="tog-track"></span></label>
    </div>
    <div class="s-row">
      <div><div class="s-row-label">Error Messages</div><div class="s-row-sub">Funny damage alerts</div></div>
      <label class="tog"><input type="checkbox" id="t-errors" checked><span class="tog-track"></span></label>
    </div>
    <div class="s-row">
      <div><div class="s-row-label">Shake to Crack</div><div class="s-row-sub">Motion trigger</div></div>
      <label class="tog"><input type="checkbox" id="t-shake" checked><span class="tog-track"></span></label>
    </div>
    <div class="s-row">
      <div><div class="s-row-label">Crack Intensity</div><div class="s-row-sub">Lines per tap</div></div>
      <div style="display:flex;align-items:center;gap:8px">
        <input type="range" class="s-range" id="r-intensity" min="1" max="10" value="5">
        <span class="range-val" id="rv">5</span>
      </div>
    </div>
    <button class="btn-noad" id="btn-noad">ğŸ’œ Remove Ads Forever â€” $1.99</button>
    <button class="btn-close-drawer" id="btn-close-drawer">Done</button>
  </div>
</div>

<!-- INTERSTITIAL -->
<div class="screen hidden" id="s-inter">
  <h2>âš¡ Quick Break</h2>
  <p>Support us to keep CrackScreen free!</p>
  <div class="ad-mock">ğŸ“¢ Ad displays here</div>
  <button class="btn-skip" id="btn-skip-inter">Skip â†’</button>
</div>

<!-- SHARE -->
<div class="screen hidden" id="s-share">
  <div class="share-box">
    <h2>ğŸ“¤ Share the Prank!</h2>
    <div id="share-preview"><canvas id="c-share"></canvas></div>
    <div class="share-btns">
      <button class="sbtn" id="sb-share">ğŸ”— Share</button>
      <button class="sbtn" id="sb-copy">ğŸ“‹ Copy</button>
    </div>
    <button class="btn-close-share" id="btn-close-share">Close</button>
  </div>
</div>

<script>
(function() {
'use strict';

/* â”€â”€ STATE â”€â”€ */
var S = { sound:true, vibrate:true, errors:true, shake:true, intensity:5, pack:'classic' };

var PACKS = [
  { id:'classic', em:'ğŸ”²', nm:'Classic', pr:null,   c:['rgba(255,255,255,0.92)','rgba(190,190,190,0.7)'] },
  { id:'heavy',   em:'ğŸ’¥', nm:'Heavy',   pr:null,   c:['rgba(255,255,255,0.98)','rgba(155,155,155,0.8)'] },
  { id:'neon',    em:'ğŸŒˆ', nm:'Neon',    pr:'$0.99',c:['rgba(0,255,200,0.9)',   'rgba(200,0,255,0.75)'] },
  { id:'blood',   em:'ğŸ©¸', nm:'Blood',   pr:'$0.99',c:['rgba(255,60,40,0.92)', 'rgba(160,0,0,0.75)'] },
  { id:'gold',    em:'âœ¨', nm:'Gold',    pr:'$1.99',c:['rgba(255,215,0,0.95)', 'rgba(180,130,0,0.75)'] },
];

var cracks=[], particles=[], crackCount=0, prankCount=0;
var audioCtx=null;
var holdTimer=null, isHolding=false;
var raf=null;
var prevScreen='s-launch';
var lastTap=0;
var autoBootTimer=null;

/* â”€â”€ SHOW SCREEN â”€â”€ */
function show(id) {
  var all = document.querySelectorAll('.screen');
  for (var i=0; i<all.length; i++) all[i].classList.add('hidden');
  var el = document.getElementById(id);
  if (el) el.classList.remove('hidden');
}

/* â”€â”€ TOAST â”€â”€ */
var toastTimer=null;
function toast(msg, dur) {
  dur = dur||3000;
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.style.display = 'block';
  t.style.opacity = '1';
  clearTimeout(toastTimer);
  toastTimer = setTimeout(function(){
    t.style.transition = 'opacity 0.3s';
    t.style.opacity = '0';
    setTimeout(function(){ t.style.display='none'; t.style.transition=''; }, 300);
  }, dur);
}

/* â”€â”€ AUDIO â”€â”€ */
function getAudioCtx() {
  if (!audioCtx) {
    try { audioCtx = new (window.AudioContext||window.webkitAudioContext)(); } catch(e){}
  }
  return audioCtx;
}
function crackSound(intensity) {
  if (!S.sound) return;
  try {
    var ctx = getAudioCtx();
    if (!ctx) return;
    if (ctx.state === 'suspended') ctx.resume();
    var dur = 0.12 + intensity*0.03;
    var n = Math.floor(ctx.sampleRate * dur);
    var buf = ctx.createBuffer(1, n, ctx.sampleRate);
    var d = buf.getChannelData(0);
    for (var i=0;i<n;i++) d[i]=(Math.random()*2-1)*(1-i/n)*(0.5+intensity*0.05);
    var src = ctx.createBufferSource(); src.buffer=buf;
    var gn = ctx.createGain();
    gn.gain.setValueAtTime(0.7, ctx.currentTime);
    gn.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime+dur);
    var bp = ctx.createBiquadFilter(); bp.type='bandpass';
    bp.frequency.value=3000+Math.random()*2000; bp.Q.value=0.5;
    src.connect(bp); bp.connect(gn); gn.connect(ctx.destination);
    src.start(); src.stop(ctx.currentTime+dur);
    // thud
    var osc=ctx.createOscillator(), g2=ctx.createGain();
    osc.frequency.setValueAtTime(110,ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(35,ctx.currentTime+0.1);
    g2.gain.setValueAtTime(0.4,ctx.currentTime);
    g2.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+0.12);
    osc.connect(g2); g2.connect(ctx.destination);
    osc.start(); osc.stop(ctx.currentTime+0.12);
  } catch(e){}
}

/* â”€â”€ VIBRATE â”€â”€ */
function vib(p) { if (S.vibrate && navigator.vibrate) try{navigator.vibrate(p);}catch(e){} }

/* â”€â”€ CANVAS â”€â”€ */
var cC, cCx, pC, pCx, cW, cH;
function setupCanvas() {
  cC = document.getElementById('c-crack');
  pC = document.getElementById('c-particles');
  cCx = cC.getContext('2d');
  pCx = pC.getContext('2d');
  doResize();
}
function doResize() {
  cW = window.innerWidth; cH = window.innerHeight;
  cC.width=cW; cC.height=cH;
  pC.width=cW; pC.height=cH;
  redrawAll();
}

/* â”€â”€ GET PACK â”€â”€ */
function getPack() {
  for (var i=0;i<PACKS.length;i++) {
    if (PACKS[i].id===S.pack && !PACKS[i].pr) return PACKS[i];
  }
  return PACKS[0];
}

/* â”€â”€ CRACK ENGINE â”€â”€ */
function addCrack(x,y,count) {
  var pk = getPack();
  var lines=[];
  var num = 3 + Math.round(count);
  for (var i=0;i<num;i++) {
    var a = Math.random()*Math.PI*2;
    var len = 55 + Math.random()*cH*0.22;
    lines.push(buildLine(x,y,a,len,4));
  }
  var g={x:x,y:y,lines:lines,pk:pk};
  cracks.push(g);
  drawGroup(g);
}

function buildLine(x,y,a,len,depth) {
  if (depth<=0||len<8) return [];
  var segs=[], steps=4+Math.floor(Math.random()*4);
  var cx=x, cy=y, ca=a;
  var sl=len/steps;
  for (var i=0;i<steps;i++) {
    ca += (Math.random()-0.5)*0.5;
    var nx=cx+Math.cos(ca)*sl, ny=cy+Math.sin(ca)*sl;
    segs.push({x1:cx,y1:cy,x2:nx,y2:ny,w:0.4+(1-i/steps)*1.8*(depth/4)});
    if (Math.random()<0.35 && depth>1) {
      var sub=buildLine(nx,ny,ca+(Math.random()-0.5)*1.3,len*0.45,depth-1);
      for (var j=0;j<sub.length;j++) segs.push(sub[j]);
    }
    cx=nx; cy=ny;
  }
  return segs;
}

function drawGroup(g) {
  var c = g.pk.c;
  for (var li=0;li<g.lines.length;li++) {
    var segs=g.lines[li];
    for (var si=0;si<segs.length;si++) {
      var s=segs[si];
      // shadow
      cCx.save();
      cCx.strokeStyle='rgba(0,0,0,0.85)';
      cCx.lineWidth=s.w+2; cCx.lineCap='round';
      cCx.beginPath(); cCx.moveTo(s.x1+1,s.y1+1); cCx.lineTo(s.x2+1,s.y2+1); cCx.stroke();
      cCx.restore();
      // crack
      cCx.save();
      var gr=cCx.createLinearGradient(s.x1,s.y1,s.x2,s.y2);
      gr.addColorStop(0,c[0]); gr.addColorStop(1,c[1]);
      cCx.strokeStyle=gr; cCx.lineWidth=s.w; cCx.lineCap='round';
      cCx.shadowColor='rgba(255,255,255,0.3)'; cCx.shadowBlur=2;
      cCx.beginPath(); cCx.moveTo(s.x1,s.y1); cCx.lineTo(s.x2,s.y2); cCx.stroke();
      cCx.restore();
    }
  }
  // shatter polygon
  var pts=5+Math.floor(Math.random()*5);
  cCx.save();
  cCx.fillStyle='rgba(255,255,255,0.05)';
  cCx.strokeStyle='rgba(255,255,255,0.22)';
  cCx.lineWidth=0.5;
  cCx.beginPath();
  for (var pi=0;pi<pts;pi++) {
    var pa=(pi/pts)*Math.PI*2, pr=10+Math.random()*18;
    var ppx=g.x+Math.cos(pa)*pr, ppy=g.y+Math.sin(pa)*pr;
    if (pi===0) cCx.moveTo(ppx,ppy); else cCx.lineTo(ppx,ppy);
  }
  cCx.closePath(); cCx.fill(); cCx.stroke();
  cCx.restore();
  // blotch
  var rg=cCx.createRadialGradient(g.x,g.y,0,g.x,g.y,22);
  rg.addColorStop(0,'rgba(0,0,0,0.9)');
  rg.addColorStop(0.5,'rgba(0,0,0,0.35)');
  rg.addColorStop(1,'rgba(0,0,0,0)');
  cCx.fillStyle=rg;
  cCx.beginPath(); cCx.arc(g.x,g.y,22,0,Math.PI*2); cCx.fill();
}

function redrawAll() {
  if (!cCx) return;
  cCx.clearRect(0,0,cW,cH);
  for (var i=0;i<cracks.length;i++) drawGroup(cracks[i]);
}

/* â”€â”€ PARTICLES â”€â”€ */
function spawnParticles(x,y,n) {
  for (var i=0;i<n;i++) {
    particles.push({
      x:x, y:y,
      vx:(Math.random()-0.5)*6,
      vy:-2-Math.random()*5,
      s:1+Math.random()*4,
      rot:Math.random()*Math.PI*2,
      rv:(Math.random()-0.5)*0.2,
      life:1.0,
      decay:0.016+Math.random()*0.022
    });
  }
}
function tickParticles() {
  pCx.clearRect(0,0,cW,cH);
  for (var i=particles.length-1;i>=0;i--) {
    var p=particles[i];
    p.x+=p.vx; p.y+=p.vy; p.vy+=0.28; p.vx*=0.98;
    p.rot+=p.rv; p.life-=p.decay;
    if (p.life<=0){ particles.splice(i,1); continue; }
    pCx.save();
    pCx.globalAlpha=p.life*0.85;
    pCx.fillStyle='rgba(210,225,255,'+p.life+')';
    pCx.translate(p.x,p.y); pCx.rotate(p.rot);
    pCx.beginPath();
    pCx.moveTo(-p.s,0); pCx.lineTo(0,-p.s*1.6);
    pCx.lineTo(p.s,0);  pCx.lineTo(p.s*0.3,p.s);
    pCx.closePath(); pCx.fill();
    pCx.restore();
  }
}

/* â”€â”€ LOOP â”€â”€ */
function startLoop() {
  if (raf) return;
  function loop() { tickParticles(); raf=requestAnimationFrame(loop); }
  raf = requestAnimationFrame(loop);
}
function stopLoop() { if(raf){cancelAnimationFrame(raf);raf=null;} }

/* â”€â”€ CRACK HANDLER â”€â”€ */
var ERRORS=[
  {t:'âš ï¸ HARDWARE FAILURE',b:'Screen damage detected! Visit a repair shop.'},
  {t:'ğŸ’€ CRITICAL ERROR',  b:'Display integrity compromised. Contact support.'},
  {t:'ğŸ†˜ SYSTEM ALERT',    b:'Touchscreen malfunction â€” 3 faults found.'},
  {t:'ğŸ“± REPAIR NEEDED',   b:'AMOLED fracture detected! Replace screen now?'},
  {t:'âš¡ VOLTAGE SPIKE',   b:'Short circuit in display module. Restart?'},
  {t:'ğŸ˜± OH NO!',          b:'Your screen is completely shattered!'},
  {t:'ğŸ› ï¸ GLASS CRACKED',  b:'Multi-layer fracture â€” check your insurance!'},
  {t:'ğŸ”´ DISPLAY ERROR',   b:'Screen buffer overflow. Reboot device now?'},
];

function handleCrack(x,y,intensity) {
  crackCount++;
  addCrack(x,y,intensity);
  spawnParticles(x,y, Math.floor(8+intensity*2));
  vib([50,30,50]);
  crackSound(intensity/5);
  if (crackCount===1) {
    document.getElementById('tap-hint').style.opacity='0';
  }
  if (S.errors && crackCount%3===0) showError();
  doShake();
}

function showError() {
  var ez=document.getElementById('error-zone');
  var e=ERRORS[Math.floor(Math.random()*ERRORS.length)];
  var d=document.createElement('div');
  d.className='err-toast';
  d.innerHTML='<div class="err-title">'+e.t+'</div><div class="err-body">'+e.b+'</div>';
  ez.appendChild(d);
  setTimeout(function(){
    d.style.transition='opacity 0.5s';
    d.style.opacity='0';
    setTimeout(function(){ if(d.parentNode) d.parentNode.removeChild(d); },500);
  },3000);
}

function doShake() {
  var sc=document.getElementById('s-crack');
  sc.classList.remove('do-shake');
  void sc.offsetWidth;
  sc.classList.add('do-shake');
  setTimeout(function(){ sc.classList.remove('do-shake'); },460);
}

/* â”€â”€ BIND CRACK SCREEN TOUCH â”€â”€ */
var crackBound=false;
function bindCrackScreen() {
  if (crackBound) return;
  crackBound=true;
  var el=document.getElementById('s-crack');

  el.addEventListener('touchstart', function(e) {
    // allow action bar buttons to work
    if (e.target.closest && e.target.closest('#action-bar')) return;
    e.preventDefault();
    var t=e.changedTouches[0];
    var x=t.clientX, y=t.clientY;

    var now=Date.now();
    if (now-lastTap<340) { triggerBoot(); return; }
    lastTap=now;

    isHolding=true;
    document.getElementById('press-harder').classList.add('show');
    handleCrack(x,y,S.intensity);

    clearInterval(holdTimer);
    holdTimer=setInterval(function(){
      if (!isHolding) return;
      handleCrack(x+(Math.random()-0.5)*50, y+(Math.random()-0.5)*50, S.intensity*1.4);
    },380);
  },{passive:false});

  el.addEventListener('touchend', function(e) {
    if (e.target.closest && e.target.closest('#action-bar')) return;
    e.preventDefault();
    isHolding=false;
    clearInterval(holdTimer);
    document.getElementById('press-harder').classList.remove('show');
  },{passive:false});

  el.addEventListener('touchcancel', function() {
    isHolding=false;
    clearInterval(holdTimer);
    document.getElementById('press-harder').classList.remove('show');
  });

  el.addEventListener('touchmove', function(e) {
    if (e.target.closest && e.target.closest('#action-bar')) return;
    e.preventDefault();
  },{passive:false});

  // Desktop fallback
  el.addEventListener('mousedown', function(e) {
    if (e.target.closest && e.target.closest('#action-bar')) return;
    var now=Date.now();
    if (now-lastTap<340) { triggerBoot(); return; }
    lastTap=now;
    isHolding=true;
    document.getElementById('press-harder').classList.add('show');
    handleCrack(e.clientX,e.clientY,S.intensity);
    clearInterval(holdTimer);
    holdTimer=setInterval(function(){
      if(!isHolding) return;
      handleCrack(e.clientX+(Math.random()-0.5)*50,e.clientY+(Math.random()-0.5)*50,S.intensity*1.4);
    },380);
  });
  el.addEventListener('mouseup', function() {
    isHolding=false; clearInterval(holdTimer);
    document.getElementById('press-harder').classList.remove('show');
  });
}

/* â”€â”€ SHAKE â”€â”€ */
var shakeBound=false;
function bindShake() {
  if (shakeBound||!window.DeviceMotionEvent) return;
  shakeBound=true;
  var last={x:0,y:0,z:0}, shakeCD=0;
  function handler(e) {
    if (!S.shake) return;
    var a=e.accelerationIncludingGravity; if(!a) return;
    var dx=Math.abs((a.x||0)-last.x), dy=Math.abs((a.y||0)-last.y), dz=Math.abs((a.z||0)-last.z);
    if (dx+dy+dz>28 && Date.now()>shakeCD) {
      shakeCD=Date.now()+600;
      if (!document.getElementById('s-crack').classList.contains('hidden')) {
        var x=cW*0.2+Math.random()*cW*0.6, y=cH*0.2+Math.random()*cH*0.6;
        handleCrack(x,y,S.intensity*1.8);
        spawnParticles(x,y,18);
      }
    }
    last={x:a.x||0,y:a.y||0,z:a.z||0};
  }
  if (typeof DeviceMotionEvent.requestPermission==='function') {
    DeviceMotionEvent.requestPermission().then(function(r){
      if(r==='granted') window.addEventListener('devicemotion',handler);
    }).catch(function(){});
  } else {
    window.addEventListener('devicemotion',handler);
  }
}

/* â”€â”€ FLOW â”€â”€ */
function startCountdown() {
  show('s-countdown');
  var n=3;
  var el=document.getElementById('cd-num');

  function tick() {
    el.classList.remove('pop');
    void el.offsetWidth;
    el.textContent = n>0 ? n : 'GO!';
    el.classList.add('pop');
    if (n<=0) { setTimeout(goToHome, 500); return; }
    n--;
    setTimeout(tick,1000);
  }
  tick();
}

function goToHome() {
  var now=new Date();
  var h=now.getHours(), m=('0'+now.getMinutes()).slice(-2);
  document.getElementById('hs-time').textContent=h+':'+m;
  document.getElementById('hs-time-small').textContent=h+':'+m;
  var days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  var mons=['January','February','March','April','May','June','July','August','September','October','November','December'];
  document.getElementById('hs-date').textContent=days[now.getDay()]+', '+mons[now.getMonth()]+' '+now.getDate();
  show('s-home');

  function go(e) {
    e.preventDefault();
    var hs=document.getElementById('s-home');
    hs.removeEventListener('touchstart',go);
    hs.removeEventListener('click',go);
    goToCrack();
  }
  var hs=document.getElementById('s-home');
  hs.addEventListener('touchstart',go,{once:true,passive:false});
  hs.addEventListener('click',go,{once:true});
}

function goToCrack() {
  prankCount++;
  show('s-crack');
  setupCanvas();
  startLoop();
  bindCrackScreen();
  bindShake();
  crackCount=0;
  cracks=[]; particles=[];
  if(cCx) cCx.clearRect(0,0,cW,cH);
  if(pCx) pCx.clearRect(0,0,cW,cH);
  document.getElementById('tap-hint').style.opacity='1';
  document.getElementById('error-zone').innerHTML='';
  toast('Tap to crack! Prank your friends ğŸ˜ˆ');

  clearTimeout(autoBootTimer);
  autoBootTimer=setTimeout(function(){
    if (!document.getElementById('s-crack').classList.contains('hidden')) triggerBoot();
  },30000);

  if (prankCount>0 && prankCount%4===0) {
    setTimeout(function(){
      if (!document.getElementById('s-crack').classList.contains('hidden')) show('s-inter');
    },2500);
  }
}

function resetCracks() {
  cracks=[]; particles=[];
  if(cCx) cCx.clearRect(0,0,cW,cH);
  if(pCx) pCx.clearRect(0,0,cW,cH);
  crackCount=0;
  document.getElementById('tap-hint').style.opacity='1';
  document.getElementById('error-zone').innerHTML='';
  vib([80]);
}

function triggerBoot() {
  stopLoop();
  show('s-boot');
  var bar=document.getElementById('boot-bar');
  bar.style.transition='none';
  bar.style.width='0%';
  setTimeout(function(){
    bar.style.transition='width 2.2s linear';
    bar.style.width='100%';
  },120);
  setTimeout(function(){
    // white flash
    var f=document.createElement('div');
    f.style.cssText='position:fixed;inset:0;background:#fff;z-index:9999;pointer-events:none;opacity:1;transition:opacity 0.25s';
    document.body.appendChild(f);
    setTimeout(function(){ f.style.opacity='0'; setTimeout(function(){ if(f.parentNode) f.parentNode.removeChild(f); },250); },80);
    show('s-crack');
    startLoop();
  },3500);
}

/* â”€â”€ SETTINGS â”€â”€ */
function getCurrentScreen() {
  var ids=['s-launch','s-crack','s-home','s-countdown','s-boot'];
  for(var i=0;i<ids.length;i++){
    var el=document.getElementById(ids[i]);
    if(el&&!el.classList.contains('hidden')) return ids[i];
  }
  return 's-launch';
}

function buildPacks() {
  var row=document.getElementById('pack-scroll');
  row.innerHTML='';
  PACKS.forEach(function(pk){
    var d=document.createElement('div');
    d.className='pack-card'+(S.pack===pk.id?' sel':'');
    d.innerHTML='<span class="pack-em">'+pk.em+'</span><div class="pack-nm">'+pk.nm+'</div><div class="pack-pr">'+(pk.pr||'Free')+'</div>'+(pk.pr?'<span class="pack-lock">ğŸ”’</span>':'');
    (function(pkRef,el){
      el.addEventListener('click',function(){
        if(pkRef.pr){ alert('Unlock "'+pkRef.nm+'" for '+pkRef.pr+' â€” Coming soon! ğŸ’œ'); return; }
        S.pack=pkRef.id;
        document.querySelectorAll('.pack-card').forEach(function(c){ c.classList.remove('sel'); });
        el.classList.add('sel');
        redrawAll();
      });
    })(pk,d);
    row.appendChild(d);
  });
}

function openSettings() {
  prevScreen=getCurrentScreen();
  buildPacks();
  // sync toggle states
  document.getElementById('t-sound').checked=S.sound;
  document.getElementById('t-vibrate').checked=S.vibrate;
  document.getElementById('t-errors').checked=S.errors;
  document.getElementById('t-shake').checked=S.shake;
  document.getElementById('r-intensity').value=S.intensity;
  document.getElementById('rv').textContent=S.intensity;
  show('s-settings');
}

function closeSettings() {
  if(prevScreen==='s-crack'){ show('s-crack'); if(!raf) startLoop(); }
  else { show('s-launch'); }
}

/* â”€â”€ SHARE â”€â”€ */
function openShare() {
  var sc=document.getElementById('c-share');
  sc.width=cW; sc.height=cH;
  var ctx=sc.getContext('2d');
  ctx.fillStyle='#000'; ctx.fillRect(0,0,cW,cH);
  if(cC) ctx.drawImage(cC,0,0);
  show('s-share');
}

function doShare() {
  var msg='ğŸ˜‚ Just pranked my friend with CrackScreen! Their reaction was PRICELESS ğŸ’€\n#CrackScreen #PrankApp #ScreenPrank';
  var sc=document.getElementById('c-share');
  if (navigator.share) {
    if (sc.toBlob) {
      sc.toBlob(function(blob){
        try {
          var f=new File([blob],'crackscreen.png',{type:'image/png'});
          navigator.share({title:'CrackScreen Prank',text:msg,files:[f]}).catch(function(){
            navigator.share({title:'CrackScreen Prank',text:msg}).catch(function(){});
          });
        } catch(e) {
          navigator.share({title:'CrackScreen Prank',text:msg}).catch(function(){});
        }
      });
    } else {
      navigator.share({title:'CrackScreen Prank',text:msg}).catch(function(){});
    }
  } else if (navigator.clipboard) {
    navigator.clipboard.writeText(msg).then(function(){
      toast('Copied to clipboard! Paste anywhere ğŸ˜‚');
    }).catch(function(){});
  } else {
    alert(msg);
  }
}

/* â”€â”€ WIRE BUTTONS â”€â”€ */
document.getElementById('btn-start').addEventListener('click', startCountdown);
document.getElementById('btn-open-settings').addEventListener('click', openSettings);
document.getElementById('ab-reset').addEventListener('click', resetCracks);
document.getElementById('ab-restart').addEventListener('click', triggerBoot);
document.getElementById('ab-share').addEventListener('click', openShare);
document.getElementById('ab-settings').addEventListener('click', openSettings);
document.getElementById('ab-home').addEventListener('click', function(){ stopLoop(); show('s-launch'); });
document.getElementById('btn-close-drawer').addEventListener('click', closeSettings);
document.getElementById('btn-noad').addEventListener('click', function(){ alert('Remove Ads â€” Coming soon! Thanks for supporting us ğŸ’œ'); });
document.getElementById('btn-skip-inter').addEventListener('click', function(){ show('s-crack'); if(!raf) startLoop(); });
document.getElementById('btn-close-share').addEventListener('click', function(){ show('s-crack'); if(!raf) startLoop(); });
document.getElementById('sb-share').addEventListener('click', doShare);
document.getElementById('sb-copy').addEventListener('click', function(){
  var msg='ğŸ˜‚ Just pranked my friend with CrackScreen!\n#CrackScreen #PrankApp';
  if(navigator.clipboard){ navigator.clipboard.writeText(msg).then(function(){ toast('Copied! ğŸ“‹'); }); }
  else { alert(msg); }
});

// Settings toggles
document.getElementById('t-sound').addEventListener('change',function(){ S.sound=this.checked; });
document.getElementById('t-vibrate').addEventListener('change',function(){ S.vibrate=this.checked; });
document.getElementById('t-errors').addEventListener('change',function(){ S.errors=this.checked; });
document.getElementById('t-shake').addEventListener('change',function(){ S.shake=this.checked; });
document.getElementById('r-intensity').addEventListener('input',function(){
  S.intensity=parseInt(this.value,10);
  document.getElementById('rv').textContent=this.value;
});

// Settings backdrop
document.getElementById('s-settings').addEventListener('click',function(e){
  if(e.target===this) closeSettings();
});
// Share backdrop
document.getElementById('s-share').addEventListener('click',function(e){
  if(e.target===this){ show('s-crack'); if(!raf) startLoop(); }
});

// Global: prevent bounce
document.addEventListener('touchmove',function(e){ e.preventDefault(); },{passive:false});
document.addEventListener('contextmenu',function(e){ e.preventDefault(); });
window.addEventListener('resize',function(){ if(cC) doResize(); });

// Wake lock
if(navigator.wakeLock){
  navigator.wakeLock.request('screen').catch(function(){});
}

// â”€â”€ BOOT â”€â”€
show('s-launch');

})();
</script>
</body>
</html>
